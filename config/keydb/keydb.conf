############################################
# NETWORK
############################################
bind 0.0.0.0 ::1
protected-mode no
port 6379
tcp-keepalive 300
timeout 0
tcp-backlog 511

############################################
# SECURITY
############################################
requirepass password

############################################
# GENERAL
############################################
daemonize no
supervised no
databases 16

# Enable latency monitoring
latency-monitor-threshold 100

############################################
# MEMORY MANAGEMENT
############################################
# Use ~75% of system memory or a fixed cap suitable for your host.
# For example: 512mb, 1gb, 2gb, etc.
maxmemory 512mb

# For a cache workload, evict the least recently used keys first
maxmemory-policy allkeys-lru

# When memory is reached, free memory periodically without blocking too long
maxmemory-samples 7

# Disable swapping of value objects to avoid latency spikes (KeyDB-specific)
server-threads 4
activedefrag yes
active-defrag-ignore-bytes 100mb
active-defrag-threshold-lower 10
active-defrag-threshold-upper 100
active-defrag-cycle-min 5
active-defrag-cycle-max 75

############################################
# PERSISTENCE (DISABLED for pure cache)
############################################
save ""
# save 900 1
# save 300 10
# save 60 10000
appendonly no

# If you need durability, enable AOF with fsync=everysec and adjust maxmemory-policy
# appendonly yes
# appendfsync everysec
# auto-aof-rewrite-percentage 100
# auto-aof-rewrite-min-size 64mb

############################################
# CLIENT BEHAVIOR & LIMITS
############################################
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit pubsub 32mb 8mb 60
client-output-buffer-limit replica 256mb 64mb 60

############################################
# EVICTION & KEYSPACE NOTIFICATIONS (optional)
############################################
# Publish keyspace notifications for fine-grained invalidation if needed
# notify-keyspace-events Ex

############################################
# CLUSTERING / REPLICATION (optional)
############################################
# replicaof <masterip> <masterport>
# masterauth <master-password>

############################################
# LOGGING & MONITORING
############################################
logfile ""
loglevel notice
slowlog-log-slower-than 10000
slowlog-max-len 128

############################################
# LUA & SCRIPTS
############################################
lua-time-limit 5000

############################################
# SNAPSHOTS / RDB (disabled above)
############################################
rdbchecksum yes
rdbcompression yes

############################################
# MISC
############################################
hz 10
dynamic-hz yes
always-show-logo no
