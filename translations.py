TRANSLATIONS = {
    # Used in helpers.py for SMS and email verification
    "verification_sms_sent": {
        "en": "Verification code sent to {target}",
        "bn": "{target} নম্বরে ভেরিফিকেশন কোড পাঠানো হয়েছে",
        "ar": "تم إرسال رمز التحقق إلى {target}"
    },
    "verification_email_sent": {
        "en": "Verification code sent to {target}",
        "bn": "{target} ঠিকানায় ভেরিফিকেশন কোড পাঠানো হয়েছে",
        "ar": "تم إرسال رمز التحقق إلى {target}"
    },
    "your_code_is": {
        "en": "Your verification code is: {code}\nPlease do not share it with anyone.",
        "bn": "আপনার যাচাইকরণ কোডটি হলো: {code}\nকোনো ব্যক্তির সাথে এটি শেয়ার করবেন না।",
        "ar": "رمز التحقق الخاص بك هو: {code}\nيرجى عدم مشاركته مع أي شخص."
    },
    "verification_email_subject": {
        "en": "Your Verification Code",
        "bn": "আপনার যাচাইকরণ কোড",
        "ar": "رمز التحقق الخاص بك"
    },
    "limit_reached": {
        "en": "Limit reached. Try again later.",
        "bn": "সীমা অতিক্রম হয়েছে। পরে আবার চেষ্টা করুন।",
        "ar": "تم الوصول إلى الحد. حاول مرة أخرى لاحقًا."
    },
    "invalid_phone_format": {
        "en": "Invalid phone number format",
        "bn": "ফোন নম্বরের ফরম্যাট সঠিক নয়",
        "ar": "تنسيق رقم الهاتف غير صالح"
    },
    "user_not_found": {
        "en": "User not found",
        "bn": "ব্যবহারকারী পাওয়া যায়নি",
        "ar": "المستخدم غير موجود"
    },
    "incorrect_password": {
        "en": "Incorrect password",
        "bn": "পাসওয়ার্ড ভুল",
        "ar": "كلمة المرور غير صحيحة"
    },
    "internal_server_error": {
        "en": "Internal server error",
        "bn": "সার্ভারে ত্রুটি হয়েছে",
        "ar": "خطأ في الخادم الداخلي"
    },
    "password_same_error": {
        "en": "New password cannot be the same as the current password.",
        "bn": "নতুন পাসওয়ার্ড পূর্বের পাসওয়ার্ডের সাথে একই হতে পারে না।",
        "ar": "لا يمكن أن تكون كلمة المرور الجديدة مثل الكلمة الحالية."
    },
    "account_deletion_confirmation_msg": {
        "en": (
            "Your account has been successfully put for deletion.\n"
            "It will take {days} days to fully delete your account.\n"
            "If it wasn't you, please contact us for account recovery.\n\n@An-Nur.app"
        ),
        "bn": (
            "আপনার অ্যাকাউন্ট ডিলিশনের জন্য সংরক্ষণ করা হয়েছে।\n"
            "আপনার অ্যাকাউন্ট সম্পূর্ণ মুছে ফেলার জন্য এটি {days} দিন সময় নিবে।\n"
            "যদি এটি আপনি না হন, তাহলে দয়া করে অ্যাকাউন্ট উদ্ধার করতে আমাদের সাথে যোগাযোগ করুন।\n\n@An-Nur.app"
        ),
        "ar": (
            "تم وضع حسابك ليتم حذفه بنجاح.\n"
            "سيستغرق حذف حسابك بالكامل {days} يومًا.\n"
            "إذا لم تكن أنت، فيرجى الاتصال بنا لاستعادة الحساب.\n\n@An-Nur.app"
        )
    },
    "subject_deletion_confirmation": {
        "en": "Account Deletion Confirmation",
        "bn": "অ্যাকাউন্ট মুছে ফেলার নিশ্চিতকরণ",
        "ar": "تأكيد حذف الحساب"
    },
    "account_deactivation_confirmation_msg": {
        "en": (
            "Your account has been successfully deactivated.\n"
            "You can reactivate it within our app.\n"
            "If it wasn't you, please contact us immediately.\n\n@An-Nur.app"
        ),
        "bn": (
            "আপনার অ্যাকাউন্ট সফলভাবে নিষ্ক্রিয় করা হয়েছে।\n"
            "আপনি আমাদের অ্যাপে এটি পুনরায় চালু করতে পারবেন।\n"
            "যদি এটি আপনি না হন, দয়া করে অবিলম্বে আমাদের সাথে যোগাযোগ করুন।\n\n@An-Nur.app"
        ),
        "ar": (
            "تم تعطيل حسابك بنجاح.\n"
            "يمكنك إعادة تنشيطه ضمن تطبيقنا.\n"
            "إذا لم تكن أنت، يرجى الاتصال بنا فورًا.\n\n@An-Nur.app"
        )
    },
    "subject_deactivation_confirmation": {
        "en": "Account Deactivation Confirmation",
        "bn": "নিশ্চিতকরণ: অ্যাকাউন্ট নিষ্ক্রিয়করণ",
        "ar": "تأكيد تعطيل الحساب"
    },
    # General
    "all_fields_including_code_required": {
        "en": "All fields including code are required",
        "bn": "সমস্ত তথ্য এবং কোড প্রয়োজন",
        "ar": "جميع الحقول بما في ذلك الرمز مطلوبة"
    },
    "all_fields_required": {
        "en": "All fields are required",
        "bn": "সমস্ত তথ্য প্রয়োজন",
        "ar": "جميع الحقول مطلوبة"
    },
    "phone_and_fullname_required": {
        "en": "Phone number and fullname required",
        "bn": "ফোন নম্বর এবং পুরো নাম প্রয়োজন",
        "ar": "رقم الهاتف والاسم الكامل مطلوبان"
    },
    "user_already_registered": {
        "en": "User with this fullname and phone already registered",
        "bn": "এই নাম এবং নম্বরের ব্যবহারকারী ইতিমধ্যে নিবন্ধিত",
        "ar": "المستخدم بهذا الاسم الكامل ورقم الهاتف مسجل بالفعل"
    },
    "registration_successful": {
        "en": "Registration successful",
        "bn": "নিবন্ধন সফল হয়েছে",
        "ar": "تم التسجيل بنجاح"
    },
    "login_successful": {
        "en": "Login successful",
        "bn": "লগইন সফল হয়েছে",
        "ar": "تم تسجيل الدخول بنجاح"
    },
    "additional_info_required": {
        "en": "Additional info required",
        "bn": "অতিরিক্ত তথ্য প্রয়োজন",
        "ar": "مطلوب معلومات إضافية"
    },
    "failed_to_send_verification_code": {
        "en": "Failed to send verification code",
        "bn": "ভেরিফিকেশন কোড পাঠাতে ব্যর্থ হয়েছে",
        "ar": "فشل في إرسال رمز التحقق"
    },
    "internal_error": {
        "en": "Internal error: {error}",
        "bn": "অভ্যন্তরীণ ত্রুটি: {error}",
        "ar": "خطأ داخلي: {error}"
    },
    "phone_fullname_new_password_required": {
        "en": "Phone, Fullname, and New Password are required",
        "bn": "ফোন, পুরো নাম এবং নতুন পাসওয়ার্ড প্রয়োজন",
        "ar": "رقم الهاتف والاسم الكامل وكلمة المرور الجديدة مطلوبة"
    },
    "incorrect_old_password": {
        "en": "Incorrect old password",
        "bn": "পুরানো পাসওয়ার্ড ভুল",
        "ar": "كلمة المرور القديمة غير صحيحة"
    },
    "password_reset_successful": {
        "en": "Password Reset Successful",
        "bn": "পাসওয়ার্ড সফলভাবে রিসেট হয়েছে",
        "ar": "تم إعادة تعيين كلمة المرور بنجاح"
    },
    "invalid_page_type": {
        "en": "Invalid page type",
        "bn": "পৃষ্ঠার ধরন সঠিক নয়",
        "ar": "نوع الصفحة غير صالح"
    },
    "invalid_phone_number": {
        "en": "Invalid phone number",
        "bn": "ফোন নম্বর সঠিক নয়",
        "ar": "رقم الهاتف غير صالح"
    },
    "invalid_login_details": {
        "en": "Invalid login details",
        "bn": "লগইন তথ্য সঠিক নয়",
        "ar": "تفاصيل تسجيل الدخول غير صحيحة"
    },
    "could_not_send_confirmation": {
        "en": "Could not send confirmation. Try again later.",
        "bn": "নিশ্চিতকরণ পাঠানো যায়নি। পরে আবার চেষ্টা করুন।",
        "ar": "تعذر إرسال التأكيد. حاول مرة أخرى لاحقًا."
    },
    "account_deletion_initiated": {
        "en": "Account deletion initiated. Check your messages.",
        "bn": "অ্যাকাউন্ট মুছে ফেলার প্রক্রিয়া শুরু হয়েছে। আপনার বার্তা চেক করুন।",
        "ar": "تم بدء حذف الحساب. تحقق من رسائلك."
    },
    "account_deactivated_successfully": {
        "en": "Account deactivated successfully.",
        "bn": "অ্যাকাউন্ট সফলভাবে নিষ্ক্রিয় করা হয়েছে।",
        "ar": "تم تعطيل الحساب بنجاح."
    },
    "an_error_occurred": {
        "en": "An error occurred",
        "bn": "একটি ত্রুটি ঘটেছে",
        "ar": "حدث خطأ"
    },
    "maintenance_message": {
        "en": "The system is under maintenance. Please try again later.",
        "bn": "সিস্টেম মেন্টেনান্সে আছে। দয়া করে পরে আবার চেষ্টা করুন।",
        "ar": "النظام تحت الصيانة. الرجاء المحاولة مرة أخرى لاحقًا."
    },
    "session_invalidated": {
        "en": "Session invalidated. Please log in again.",
        "bn": "সেশন বাতিল হয়েছে। দয়া করে আবার লগইন করুন।",
        "ar": "تم إبطال الجلسة. الرجاء تسجيل الدخول مرة أخرى."
    },
    "account_is_valid": {
        "en": "Account is valid",
        "bn": "অ্যাকাউন্ট বৈধ",
        "ar": "الحساب صالح"
    },
    "code_successfully_matched": {
        "en": "Code successfully matched",
        "bn": "কোড সফলভাবে মিলেছে",
        "ar": "تمت مطابقة الرمز بنجاح"
    },
    # core.py
    "fullname_phone_acc_type_required": {
        "en": "fullname, phone and acc_type are required",
        "bn": "পূর্ণ নাম, ফোন এবং অ্যাকাউন্ট টাইপ প্রয়োজন",
        "ar": "الاسم الكامل، رقم الهاتف ونوع الحساب مطلوبة"
    },
    "id_not_found": {
        "en": "ID not found",
        "bn": "আইডি পাওয়া যায়নি",
        "ar": "لم يتم العثور على المعرف"
    },
    "all_required_fields_student": {
        "en": "All required fields must be provided for Student",
        "bn": "ছাত্রের জন্য সমস্ত প্রয়োজনীয় তথ্য দিতে হবে",
        "ar": "يجب تقديم جميع الحقول المطلوبة للطالب"
    },
    "all_required_fields_type": {
        "en": "All required fields must be provided for {type}",
        "bn": "{type} এর জন্য সমস্ত প্রয়োজনীয় তথ্য দিতে হবে",
        "ar": "يجب تقديم جميع الحقول المطلوبة لـ {type}"
    },
    "name_phone_father_required_guest": {
        "en": "Name, Phone, and Father/Spouse are required for Guest",
        "bn": "গেস্টের জন্য নাম, ফোন এবং পিতার/স্বামীর নাম প্রয়োজন",
        "ar": "الاسم، رقم الهاتف واسم الأب/الزوج مطلوبة للضيف"
    },
    "user_exists_with_id": {
        "en": "User already exists with this ID",
        "bn": "এই আইডি সহ ব্যবহারকারী ইতিমধ্যে আছে",
        "ar": "المستخدم موجود بالفعل بهذا المعرف"
    },
    "database_error": {
        "en": "Database error: {error}",
        "bn": "ডাটাবেস ত্রুটি: {error}",
        "ar": "خطأ في قاعدة البيانات: {error}"
    },
    "file_not_found": {
        "en": "File not found",
        "bn": "ফাইল পাওয়া যায়নি",
        "ar": "الملف غير موجود"
    },
    "profile_added_successfully": {
        "en": "{type} profile added successfully",
        "bn": "{type} প্রোফাইল সফলভাবে যোগ করা হয়েছে",
        "ar": "تمت إضافة ملف تعريف {type} بنجاح"
    },
    "database_connection_failed": {
        "en": "Database connection failed",
        "bn": "ডাটাবেস সংযোগ ব্যর্থ হয়েছে",
        "ar": "فشل الاتصال بقاعدة البيانات"
    },
    # Payments
    "user_not_found_payment": {
        "en": "User not found for payment",
        "bn": "পেমেন্টের জন্য ব্যবহারকারী পাওয়া যায়নি",
        "ar": "لم يتم العثور على المستخدم للدفع"
    },
    "transaction_failed": {
        "en": "Transaction failed",
        "bn": "লেনদেন ব্যর্থ হয়েছে",
        "ar": "فشلت المعاملة"
    },
    "phone_fullname_type_required": {
        "en": "Phone, fullname and payment type required",
        "bn": "ফোন, পুরো নাম এবং পেমেন্ট টাইপ প্রয়োজন",
        "ar": "رقم الهاتف والاسم الكامل ونوع الدفع مطلوبة"
    },
    "invalid_updated_since_format": {
        "en": "Invalid updatedSince format",
        "bn": "আপডেটেড সিন্স ফরম্যাট সঠিক নয়",
        "ar": "تنسيق محدث منذ غير صالح"
    },
    "internal_server_error_payment": {
        "en": "Internal server error during payment processing",
        "bn": "পেমেন্ট প্রসেসিং এর সময় সার্ভারে ত্রুটি হয়েছে",
        "ar": "خطأ في الخادم الداخلي أثناء معالجة الدفع"
    },
    "no_transactions_found": {
        "en": "No transactions found",
        "bn": "কোন লেনদেন পাওয়া যায়নি",
        "ar": "لم يتم العثور على معاملات"
    },
    "amount_and_type_required": {
        "en": "Amount and payment type are required",
        "bn": "পরিমাণ এবং পেমেন্ট টাইপ প্রয়োজন",
        "ar": "المبلغ ونوع الدفع مطلوبان"
    },
    "payment_gateway_misconfigured": {
        "en": "Payment gateway is not properly configured",
        "bn": "পেমেন্ট গেটওয়ে সঠিকভাবে কনফিগার করা হয়নি",
        "ar": "لم يتم تكوين بوابة الدفع بشكل صحيح"
    },
    "gateway_unreachable": {
        "en": "Payment gateway is currently unreachable",
        "bn": "পেমেন্ট গেটওয়ে বর্তমানে অপ্রাপ্য",
        "ar": "بوابة الدفع غير متاحة حاليًا"
    },
    "payment_initiation_failed": {
        "en": "Payment initiation failed",
        "bn": "পেমেন্ট শুরু করতে ব্যর্থ হয়েছে",
        "ar": "فشل بدء الدفع"
    },
    "invalid_return_type": {
        "en": "Invalid return type",
        "bn": "রিটার্ন টাইপ সঠিক নয়",
        "ar": "نوع العودة غير صالح"
    },
    "payment_failed": {
        "en": "Payment failed",
        "bn": "পেমেন্ট ব্যর্থ হয়েছে",
        "ar": "فشل الدفع"
    },
    "payment_cancelled": {
        "en": "Payment cancelled",
        "bn": "পেমেন্ট বাতিল করা হয়েছে",
        "ar": "تم إلغاء الدفع"
    },
    "missing_transaction_identifier": {
        "en": "Missing transaction identifier",
        "bn": "লেনদেন শনাক্তকারী অনুপস্থিত",
        "ar": "معرف المعاملة مفقود"
    },
    "payment_validation_failed": {
        "en": "Payment validation failed",
        "bn": "পেমেন্ট যাচাইকরণ ব্যর্থ হয়েছে",
        "ar": "فشل التحقق من صحة الدفع"
    },
    "payment_validation_error": {
        "en": "Error during payment validation",
        "bn": "পেমেন্ট যাচাইকরণের সময় ত্রুটি",
        "ar": "خطأ أثناء التحقق من صحة الدفع"
    },
    "payment_recorded": {
        "en": "Payment recorded successfully",
        "bn": "পেমেন্ট সফলভাবে রেকর্ড করা হয়েছে",
        "ar": "تم تسجيل الدفع بنجاح"
    },
    # Account management
    "account_deactivated": {
        "en": "Account is deactivated",
        "bn": "অ্যাকাউন্ট নিষ্ক্রিয় করা হয়েছে",
        "ar": "تم تعطيل الحساب"
    },
    "no_account_given": {
        "en": "No account information provided.",
        "bn": "কোনো অ্যাকাউন্ট তথ্য দেওয়া হয়নি।",
        "ar": "لم يتم تقديم معلومات الحساب."
    },
    "undo_period_expired": {
        "en": "Undo period expired.",
        "bn": "আনডু করার সময়সীমা শেষ হয়েছে।",
        "ar": "انتهت فترة التراجع."
    },
    "no_deactivated_account_found": {
        "en": "No deactivated account found.",
        "bn": "কোনো নিষ্ক্রিয় অ্যাকাউন্ট পাওয়া যায়নি।",
        "ar": "لم يتم العثور على حساب معطل."
    },
    "account_reactivated": {
        "en": "Account reactivated.",
        "bn": "অ্যাকাউন্ট পুনরায় সক্রিয় করা হয়েছে।",
        "ar": "تم إعادة تنشيط الحساب."
    },
    "account_reactivation_failed": {
        "en": "Account reactivation failed.",
        "bn": "অ্যাকাউন্ট পুনরায় সক্রিয় করা ব্যর্থ হয়েছে।",
        "ar": "فشل إعادة تنشيط الحساب."
    }
}

def t(key, lang, **kwargs):
    entry = TRANSLATIONS.get(key, {})
    text = entry.get(lang) or entry.get("en")  # fallback to English
    if kwargs:
        return text.format(**kwargs) if text else key
    return text if text else key
